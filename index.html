<!doctype html>
<html>
<head>
	<title>Gallery</title>
	<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="img/favicon.ico" type="image/x-icon">
	<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/gallery.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>
	<div class="label">
		<h1 style="margin: 0;">Animal Gallery</h1><br>
		<h3 style="color:#333;margin: -20px 0 0 0;">By Ben Fleming</h3>
	</div>
	<div class="gallery --default"></div>
	<script src="js/gallery.js"></script>
	<script>

		// Define The Data For The Gallery To User
		// data_array -> object -> { id , caption , ... }
		var data = [
			{
				'id': '1084',
				'caption': 'Seal'
			},{
				'id': '1074',
				'caption': 'Tiger'
			},{
				'id': '1062',
				'caption': 'Puppy Dog'
			},{
				'id': '1024',
				'caption': 'America'
			},{
				'id': '1020',
				'caption': 'Canada'
			},{
				'id': '1003',
				'caption': 'Dear #1'
			},{
				'id': '943',
				'caption': 'Dear #2'
			},{
				'id': '881',
				'caption': 'Sea Land'
			},{
				'id': '790',
				'caption': 'Dear #3'
			},{
				'id': '783',
				'caption': 'Monkey? Baboon?'
			},{
				'id': '718',
				'caption': 'Big Puppy Dog'
			},{
				'id': '659',
				'caption': 'Dusty'
			},{
				'id': '593',
				'caption': 'King Ezekiel'
			},{
				'id': '582',
				'caption': 'Puppy Dog #2'
			},{
				'id': '433',
				'caption': 'Care Bear'
			},{
				'id': '237',
				'caption': 'Black Sheep'
			},{
				'id': '219',
				'caption': 'P p p poker face, p p p poker face'
			}
		];

		//
		// Define Variabels
		//

		// Build The Builders That The Gallery Will Call To Get Data
		// All Functions Need 3 Paramters,
		// _g as obj;		This is the object of the Gallery
		// index as int; 	This is the index of the data in the Gallerys Config
		// value as *;		This is the value of the data[index] in the Gallerys Config
		var builders = {
			'url': function (_g, index, value) { return "https://unsplash.it/1920/1080?image="+value.id; },
			'url_s': function (_g, index, value) { return "https://unsplash.it/100/56?blur&image="+value.id; },
			'caption': function (_g, index, value) { return (value.caption.length <= 16 || _g.config.state == 'overlay' ? value.caption : value.caption.substr(0, 16) + '...'); },
			'oringal_size': function (_g, index, value) { return "1920px x 1080px"; },
			'height': function (_g, index, value) { return "calc(( 1080 / 1920 ) * ( "+_g.config.dom.container.offsetWidth+"px / "+_g.config.page.max_per_line+" ))"; },
			'width': function (_g, index, value) { return "calc( 100% / "+_g.config.page.max_per_line+" - 20px )"; },
		};

		// Build The Template String With The ["{{", "}}"] Signals, To Show Where The Params Are
		var template = function (_g, state) {
			var t = "<div class='img_wrap' data-id='{{ id }}' style='background-image: url(\"{{ url_s }}\");min-height:{{ height }};width:{{ width }};'><img src='{{ url }}'><div class='caption'>{{ caption }}</div></div>";
			var t_overlay = "<div class='img_wrap overlay_img' data-id='{{ id }}' style='background-image: url({{ url_s }});'><img style='background-image:url({{ url }});'><div class='img_info'><label class='caption'>{{ caption }}</label><div class='label_group vertical'><label class='size'>{{ oringal_size }}</label><label class='author'>Provided By <a href='http://unsplash.it/' target='_blank'>unsplash.it/</a></label></div></div></div>";
			var t_basic = _g.config.template_default;

			if (state == 'overlay') {
				return t_overlay;
			} else if (state == 'buffer') {
				return t_basic;
			}

			return t;
		};

		// Get Instance Of Gallery
	    var gallery = new Gallery();

		// Config Edit
		// This Is Where You Should Make Any Static Changes To The Config
	    // [START]
	    gallery.data = data;
		gallery.template = template;
		gallery.builders = builders;
		gallery.overlay_enabled = true;
		gallery.debug = true;
	    gallery.max_per_page = 6;
		gallery.max_per_line = null;
	    // [END]

	    // Finally Run The Gallery To Save The Config
		// And Start The UI
	    gallery.init();

		var Key = {
		  LEFT:   37,
		  RIGHT:  39
		};

		/**
		 * old IE: attachEvent
		 * Firefox, Chrome, or modern browsers: addEventListener
		 */
		function _addEventListener(evt, element, fn) {
		  if (window.addEventListener) {
		    element.addEventListener(evt, fn, false);
		  }
		  else {
		    element.attachEvent('on'+evt, fn);
		  }
		}

		function handleKeyboardEvent(evt) {
		  if (!evt) {evt = window.event;} // for old IE compatible
		  var keycode = evt.keyCode || evt.which; // also for cross-browser compatible

		  var info = document.getElementById("info");
		  switch (keycode) {
		    case Key.LEFT:
		      gallery.prev()
		      break;
		    case Key.RIGHT:
		      gallery.next();
		      break;
		  }
		}

		_addEventListener('keydown', document, handleKeyboardEvent);
	</script>
</body>
</html>
